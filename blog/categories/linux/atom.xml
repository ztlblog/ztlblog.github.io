<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: linux | Blog like hacke]]></title>
  <link href="http://ztlblog.github.io/blog/categories/linux/atom.xml" rel="self"/>
  <link href="http://ztlblog.github.io/"/>
  <updated>2015-07-31T14:55:49+08:00</updated>
  <id>http://ztlblog.github.io/</id>
  <author>
    <name><![CDATA[ztl]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[coreseek安装及使用]]></title>
    <link href="http://ztlblog.github.io/blog/2015/07/31/linux/"/>
    <updated>2015-07-31T14:38:14+08:00</updated>
    <id>http://ztlblog.github.io/blog/2015/07/31/linux</id>
    <content type="html"><![CDATA[<p><strong>下载coreseek</strong></p>

<pre><code>http://www.coreseek.cn/uploads/csft/3.2/coreseek-3.2.14.tar.gz
</code></pre>

<p><strong>安装mmseg</strong></p>

<pre><code>cd mmseg-3.2.14
./configure --prefix=/usr/local/mmseg3
make &amp;&amp; make install
</code></pre>

<p><strong>可能出错</strong></p>

<pre><code>aclocal
libtoolize --force
automake --add-missing
autoconf
autoheader
make clean
./configure --prefix=/usr/local/mmseg3
make &amp;&amp; make install
</code></pre>

<p><strong>安装csft</strong></p>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd csft-3.2.14
</span><span class='line'>./configure &ndash;prefix=/usr/local/csft &ndash;without-unixodbc &ndash;with-mmseg &ndash;with-mmseg-includes=/usr/local/coreseek/include/mmseg/ &ndash;with-mmseg-libs=/usr/local/coreseek/lib/ &ndash;with-mysql&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p>make &amp;&amp; make install</span></code></pre></td></tr></table></div></figure></p>

<p><strong>测试mmseg分词</strong></p>

<pre><code>cd testpack
cat var /test/test.xml
/usr/lcoal/mmseg3/bin/mmseg -d /usr/local/mmseg3/etc var/test/test.xml
/usr/local/csft/bin/indexer -c etc/csft.conf --all
/usr/local/csft/bin/search -c etc/csft.conf  网络搜索
</code></pre>

<p><strong>安装php扩展</strong></p>

<pre><code>/usr/local/src/coreseek-3.2.14/testpack/api/libsphinxclient
./configure 

下载php扩展 （http://pecl.php.net/get/sphinx-1.3.3.tgz）
cd  /usr/local/src/sphinx-1.3.3
执行 phpize

./configure --with-php-config=/usr/bin/php-config  --with-sphinx
</code></pre>

<p><strong>创建一个sphinx.conf文件</strong></p>

<pre><code>source src1
{
    type= mysql

    sql_host= localhost
    sql_user= yejianfeng
    sql_pass= test
    sql_db  = mysite
    sql_port= 3306  # optional, default is 3306

    sql_query_pre   = SET NAMES utf8
    sql_query_pre   = SET SESSION query_cache_type=OFF

    sql_query   = select id, id AS id_new,name, name AS name_query,descr, descr AS descr_query,city FROM account
    sql_attr_string = name
    sql_attr_string = descr

    sql_query_info  = SELECT * FROM account WHERE id=$id
}

source src1throttled : src1
{
    sql_ranged_throttle = 100
}

index test1
{
    source  = src1
    path= /home/yejianfeng/instance/coreseek/var/data/test1
    docinfo = extern
    mlock   = 0
    morphology  = none
    min_word_len= 1
    charset_type = zh_cn.utf-8
    charset_dictpath  = /home/yejianfeng/instance/mmseg/etc/
    html_strip  = 0
}



indexer
{
    mem_limit   = 256M
}

searchd
{
    listen  = 9312
    listen  = 9306:mysql41

    log = /home/yejianfeng/instance/coreseek/var/log/searchd.log
    query_log   = /home/yejianfeng/instance/coreseek/var/log/query.log
    read_timeout= 5
    client_timeout  = 300
    max_children= 30
    pid_file= /home/yejianfeng/instance/coreseek/var/log/searchd.pid
    max_matches = 1000
    seamless_rotate = 1
    preopen_indexes = 1
    unlink_old  = 1
    mva_updates_pool= 1M
    max_packet_size = 8M
    max_filters = 256
    max_filter_values   = 4096
}
</code></pre>

<p><strong>php使用</strong></p>

<pre><code>$s = new SphinxClient;
$s-&gt;setServer("localhost", 9312);
$s-&gt;setArrayResult(true);
$s-&gt;setSelect();
$s-&gt;setMatchMode(SPH_MATCH_ALL);

$result = $s-&gt;query('美女', 'test1');
print_r($result);
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[linux之samba]]></title>
    <link href="http://ztlblog.github.io/blog/2015/07/27/linux004/"/>
    <updated>2015-07-27T14:58:54+08:00</updated>
    <id>http://ztlblog.github.io/blog/2015/07/27/linux004</id>
    <content type="html"><![CDATA[<h2>关闭iptables</h2>

<pre><code>vim /etc/sysconfig/network-scripts/ifcfg-eth0
如何没有DNS  可以加上DNS=8.8.8.8

vim /etc/selinux/config
SELINUX=disabled

iptables -F
</code></pre>

<h2>下载samba</h2>

<pre><code>yum -y install samba
vim /etc/samba/smb.conf

security = user  //用户需要登录
sercurity = share  //用户不需要登录

可以这样添加目录
[tmp]
path=/tmp   //路径
writable=yes  //可以写
public=yes  //可以使用 
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[linux下如何编译安装软件]]></title>
    <link href="http://ztlblog.github.io/blog/2015/07/20/linux003/"/>
    <updated>2015-07-20T13:10:47+08:00</updated>
    <id>http://ztlblog.github.io/blog/2015/07/20/linux003</id>
    <content type="html"><![CDATA[<h3>基本步骤</h3>

<pre><code>1 ./configure 检查gcc编译器、依赖函数库或软件是否已经安装
2 当configure 检查通过后，生成makefile文件
3 make根据makefile生成可执行文件（二进制文件）
4 make install 到/etc /lib /usr/lib /usr/share /var/lib
</code></pre>

<h3>注意</h3>

<pre><code>/etc 一般放置配置文件
/lib /usr/lib 一般放置函数库 
/var/lib  一般放置数据库
</code></pre>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[apache基本配置]]></title>
    <link href="http://ztlblog.github.io/blog/2015/07/10/apache002/"/>
    <updated>2015-07-10T16:58:55+08:00</updated>
    <id>http://ztlblog.github.io/blog/2015/07/10/apache002</id>
    <content type="html"><![CDATA[<h2>1.apache使用php</h2>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>加载php的动态模块
</span><span class='line'>LoadModule php5_module  modules/libphp5.so
</span><span class='line'>解析 .php 的脚本
</span><span class='line'>AddType application/x-httpd-php .php</span></code></pre></td></tr></table></div></figure></p>

<h2>2.虚拟目录技术</h2>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>Aliaa /m &ldquo;/mnt&rdquo;
</span><span class='line'>&lt;Directory "/mnt">
</span><span class='line'>    Options Indexes MultiViews
</span><span class='line'>    AllowOverride None
</span><span class='line'>    Order allow,deny
</span><span class='line'>    Allow from all
</span><span class='line'>&lt;/Directory>
</span><span class='line'>注意：indexes 下载列表
</span><span class='line'>    multiviews 多视图（&lt;a href="http://192.168.100.1/m/show">http://192.168.100.1/m/show&lt;/a> 就可以访问show.php）</span></code></pre></td></tr></table></div></figure></p>

<h2>3.虚拟主机技术</h2>

<p><figure class='code'><figcaption><span>不同域名解析到同一个ip上 </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>vim httpd-vhosts.conf
</span><span class='line'>NameVirtualHost 192.168.100.1:80
</span><span class='line'>&lt;VirtualHost 192.168.100.1:80>
</span><span class='line'>    DocumentRoot &ldquo;/web/bbs&rdquo;
</span><span class='line'>    ServerName bbs.lampym.com
</span><span class='line'>    #修改虚拟主机的服务权限
</span><span class='line'>    &lt;Directory "/web/bbs">
</span><span class='line'>        Options Indexes MultiViews
</span><span class='line'>        AllowOverride Node
</span><span class='line'>        Order allow,deny
</span><span class='line'>        Allow form all
</span><span class='line'>    &lt;/Directory>
</span><span class='line'>&lt;/VirtualHost></span></code></pre></td></tr></table></div></figure></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[编译安装lamp]]></title>
    <link href="http://ztlblog.github.io/blog/2015/07/10/lamp001/"/>
    <updated>2015-07-10T10:08:12+08:00</updated>
    <id>http://ztlblog.github.io/blog/2015/07/10/lamp001</id>
    <content type="html"><![CDATA[<h2>1.安装gcc编辑器</h2>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yum -y install gcc*</span></code></pre></td></tr></table></div></figure></p>

<h2>2.卸载系统apache,mysql,php的rpm安装包</h2>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>yum remove httpd
</span><span class='line'>yum remove mysql</span></code></pre></td></tr></table></div></figure></p>

<h2>3.编译安装php</h2>

<p><figure class='code'><figcaption><span>libxml2 </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd /lamp/libxml2-2.6.30
</span><span class='line'>./configure &ndash;prefix=/usr/local/libxml2
</span><span class='line'>make
</span><span class='line'>make install</span></code></pre></td></tr></table></div></figure></p>

<p><figure class='code'><figcaption><span>libmcrypt </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd /lamp/libmcrypt-2.5.8
</span><span class='line'>./configure &ndash;prefix=/usr/local/libmcrypt/
</span><span class='line'>make
</span><span class='line'>make install</span></code></pre></td></tr></table></div></figure></p>

<p><figure class='code'><figcaption><span>libtdl </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>注：libltdl是在libmcrypt源码目录中，非新软件
</span><span class='line'>cd /lamp/libmcrypt-2.5.8/libltdl
</span><span class='line'>./configure &ndash;enable-ltdl-install
</span><span class='line'>make
</span><span class='line'>make install</span></code></pre></td></tr></table></div></figure></p>

<p><figure class='code'><figcaption><span>zlib </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd /lamp/zlib-1.2.3
</span><span class='line'>./configure
</span><span class='line'>make
</span><span class='line'>make install
</span><span class='line'>注：zlib指定安装目录可能造成libpng安装失败，故不指定，为了卸载方便
</span><span class='line'>建议 make isntall 执行结果输出到安装日志文件，便于日后卸载</span></code></pre></td></tr></table></div></figure></p>

<p><figure class='code'><figcaption><span>libpng </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd /lamp/libpng-1.2.31
</span><span class='line'>./configure &ndash;prefix=/usr/local/libpng
</span><span class='line'>make
</span><span class='line'>make install</span></code></pre></td></tr></table></div></figure></p>

<p><figure class='code'><figcaption><span>jpeg6 </span></figcaption>
<div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>mkdir /usr/local/jpeg6
</span><span class='line'>mkdir /usr/local/jpeg6/bin
</span><span class='line'>mkdir /usr/local/jpeg6/lib
</span><span class='line'>mkdir /usr/local/jpeg6/include
</span><span class='line'>mkdir /usr/local/jpeg6/man/man 1&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;p></span></code></pre></td></tr></table></div></figure></p>

<h2>4.安装apache</h2>

<p><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>cd /lamp/httpd-2.2.9
</span><span class='line'>./configure &ndash;prefix=/usr/local/apache2/ \
</span><span class='line'>&ndash;sysconfdir=/usr/local/apache2/etc/ &ndash;with-included-apr \
</span><span class='line'>&ndash;enable-dav &ndash;enable-so &ndash;enable-defate=sharef \
</span><span class='line'>&ndash;enable-expries=shared &ndash;enable-rewrite=shared
</span><span class='line'>make
</span><span class='line'>make install
</span><span class='line'>启动apache测试
</span><span class='line'>/usr/local/apache2/bin/apachectl restart
</span><span class='line'>查看进程
</span><span class='line'>ps -le |grep httpd
</span><span class='line'>查看apche模块
</span><span class='line'>/usr/local/apache2/bin/apachectl -h&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;h1>share 动态模块或动态文件&lt;/h1>
</span><span class='line'>
</span><span class='line'>&lt;p>php5 rewrite&lt;/p>
</span><span class='line'>
</span><span class='line'>&lt;h1>static 静态模块或表态库文件&lt;/h1>
</span><span class='line'>
</span><span class='line'>&lt;p>server-status
</span><span class='line'>userdir
</span><span class='line'>vitual host
</span><span class='line'>测试地址
</span><span class='line'>&lt;a href="http://192.168.100.1/index.html">http://192.168.100.1/index.html&lt;/a>
</span><span class='line'>设置apache随机启动
</span><span class='line'>vim /etc/rc.local
</span><span class='line'>/usr/local/apache2/bin/apachectl restart</span></code></pre></td></tr></table></div></figure></p>
]]></content>
  </entry>
  
</feed>
